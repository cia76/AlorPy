# AlorPy
Библиотека-обертка, которая позволяет работать с функционалом [АЛОР Брокер API](https://alor.dev/docs) брокера [Алор](https://www.alorbroker.ru/) из Python.

### Что такое библиотека-обертка?
Компактная библиотека, содержащая только самый необходимый код для работы с API брокера из Python:
- Подключение к API. Отслеживание корректности подключения (обновление токенов, переподключение)
- Выполнение запросов и получение ответов от API
- Механизмы подписок, отмены подписок. Получение и разбор данных подписок
- Конвертация типов данных брокера в типы данных Python и обратно. Например, цена, лоты/штуки, дата/время
- Конвертация типов данных брокера в универсальные типы и обратно. Например, название тикера, режимы торгов, временнОй интервал
- Ведение лога отправляемых и получаемых данных от API

### Назначение
 - Создание автоматических торговых систем любой сложности
 - Написание дополнений к системам Технического Анализа
 - Тестирование торговых систем и автоматическая торговля в [BackTrader](https://www.backtrader.com/) через [систему "Финансовая Лаборатория"](https://github.com/cia76/FinLabPy).

### Особенности
- Кол-во десятичных знаков в спецификации тикера получаем из шага цены

### Установка
Установите библиотеку через pip в командной строке: **pip install git+https://github.com/cia76/AlorPy.git** 

### Начало работы
#### Получите Refresh Token:
1. Для получения тестового логина/пароля демо счета отправьте заявку в [ALOR OpenAPI - Support в Telegram](https://t.me/AlorOpenAPI)
2. Зарегистрируйтесь на [Портале разработчиков АЛОР Брокер](https://alor.dev/login)
3. Выберите **Токены для доступа к API**. Следуйте инструкции

#### Для реального счета:
1. Выберите **Привязать аккаунт**. Следуйте инструкции
2. Выберите **Выписать токен**. Следуйте инструкции

#### Для демо счета:
1. Выберите **Токены для ведения торгов в тестовом контуре** - **Begin OAuth authorization flow**
2. Введите тестовый логин/пароль. Нажмите **Разрешить**

Вызовите библиотеку из Python с новым токеном: ap_provider = AlorPy('<Токен>'). Токен сохранится в защищенном системном хранилище. Далее можно вызывать библиотеку без токена: ap_provider = AlorPy()

В папке **Examples** находятся файлы примеров с хорошо документированным кодом. С них лучше начать разбираться с библиотекой.

- **Connect.py** - Подключение к Alor OpenAPI V2. Проверка работы API запрос/ответ: Время на сервере. Проверка работы подписок WebSocket: Подписка на новые бары. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/connect/)
- **Accounts.py** - Получение кол-ва тикеров по классам бирж. Список всех счетов/договоров/портфелей с позициями, балансами, заявками и стоп заявками. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/accounts/)
- **Ticker.py** - Информация о различных тикерах. Валюта, лот, шаг цены. Вычисление кол-во десятичных знаков из шага цены. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/ticker/)
- **Bars.py** - Загрузка свечек из файла, если есть. Получение истории свечек. Сохранение всех свечек в файл с фильтрами первого/последнего дня и дожи 4-х цен. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/bars/)
- **Stream.py** - Запрос стакана. Подписка на стакан. Запрос обезличенных сделок. Подписка на обезличенные сделки. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/stream/)
- **Transactions.py** - Подписки на заявки, стоп заявки, позиции, сделки. Получение последней цены сделки через запрос котировок. Выставление рыночных заявок на покупку и продажу. Выставление и отмена лимитной заявки. Выставление и отмена стоп заявки. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/transactions/)

### Авторство, право использования, развитие
Автор библиотеки Чечет Игорь Александрович. Библиотека написана в рамках проекта [Финансовая Лаборатория](https://finlab.vip/).

Библиотека предоставляется бесплатно в исходном коде, с подробными комментариями и видеоразборами. При распространении ссылка на автора и проект обязательны.

Исправление ошибок, доработка и развитие библиотеки осуществляется автором и сообществом частных алготрейдеров проекта [Финансовая Лаборатория](https://finlab.vip/).

Вопросы по работоспособности Alor OpenAPI задавайте в [официальном Telegram чате Алора здесь >>>](https://t.me/alor_openapi_chat)

### Что дальше
- Бесплатный курс "Автоторговля" по идеям, концепциям и процессам алгоритмической/автоматической торговли [смотрите здесь >>>](https://finlab.vip/wpm-category/autotrading2021/)


- Бесплатный курс "BackTrader: Быстрый старт" [ждет вас здесь >>>](https://finlab.vip/wpm-category/btquickstart/)


- [Подписывайтесь на Telegram канал "Финансовой Лаборатории",](https://t.me/finlabvip) чтобы быть в курсе всех новинок алгоритмической и автоматической торговли.
